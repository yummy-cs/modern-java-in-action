# 8.3 ë§µ ì²˜ë¦¬

# 8.3.1 forEach ë©”ì„œë“œ

- Java 8ë¶€í„° Map ì¸í„°í˜ì´ìŠ¤ì— `forEach` ì™€ ê°™ì´ ì§ì ‘ êµ¬í˜„ í•  í•„ìš” ì—†ëŠ” ëª‡ ê°€ì§€ `default` ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.

- `Map<k, V>` ì—ì„œ key, value ê°’ì„ ë°˜ë³µí•˜ì—¬ ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ì„œ `Map.Entry<K, V>` ì˜ ë°˜ë³µìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì•„ë˜ì™€ ê°™ì´ ë³µì¡í•˜ë‹¤.
    
    ```java
    for(Map.Entity<String, Integer> entry : ageOfFriends.entitySet()) {
      String friends = entry.getKey();
      Integer age = entry.getValue();
      System.out.println(friend + " is " + age + " years old");
    }
    ```
</br>
    
    
- Java8 Map Interface ëŠ” `BiConsumer(Key, Value)` ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ” `forEach` ë©”ì„œë“œê°€ `default` ë©”ì„œë“œë¡œ ì œê³µë˜ì–´ì„œ ì•„ë˜ì™€ ê°™ì´ ë²ˆê±°ë¡œìš´ ì‘ì—…ì„ ëœì–´ë‚´ê³  êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
    
    ```java
    Map<String, Integer> ageOfFriends = new HashMap<>();
    ageOfFriends.forEach((friend, age) -> print(friend + "is" + age)))
    ```
    
</br>

# 8.3.2 ì •ë ¬ ë©”ì„œë“œ

- Java8 ì—ì„œ ì¶”ê°€ëœ ìƒˆë¡œìš´ ìœ í‹¸ë¦¬í‹°ë¥¼ ì´ìš©í•´ `Map<K, V>` ìš”ì†Œë¥¼ key ë˜ëŠ” value ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•  ìˆ˜ ìˆë‹¤.
    - `Entry.comparingByKey`
    - `Entry.comparingByValue`
 
      </br>
    
    ```java
    Map<String, String> favouriteMovies = Map.ofEntries(
      entry("Raphael", "Star Wars"),
      entry("Cristina", "Matrix"),
      entry("Olivia", "James Bond"));
    
    favouriteMovies.entrySet().stream()
      .sorted(Entry.ComparingByKey())
      .forEachOrdered(System.out::println);
    
    // ----ì¶œë ¥----
    //cristina=matrix
    //olivia=james Bond
    //Raphael=Star Wars
    ```
</br>

> ### ğŸ’¡ì°¸ê³ 
>    
>    - Java8 ì—ì„œëŠ” `HashMap` ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë°”ê¿” ì„±ëŠ¥ì„ ê°œì„ í–ˆë‹¤.
>        - ê¸°ì¡´ Map í•­ëª©ì€ Key ë¡œ ìƒì„±í•œ Hash Code ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” Bucket ì— ì €ì¥í–ˆë‹¤.
>        - ë§ì€ HashCode ë¥¼ ë³€í™˜í•˜ëŠ” ìƒí™©ì´ ë˜ë©´ O(n) ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ëŠ” LinkedList ë¡œ Bucketì„ ë³€í™˜í•´ì•¼ í•´ì„œ ì„±ëŠ¥ì´ ì €í•˜ëœë‹¤.
>        - ì´ë¥¼ í–‰ê²°í•˜ê¸° ìœ„í•´ ìµœê·¼ì—ëŠ” Bucket ì´ ë„ˆë¬´ ì»¤ì§€ëŠ” ê²½ìš° O(log(n)) ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ëŠ” ì •ë ¬ íŠ¸ë¦¬ë¥¼ ì´ìš©í•´ ë™ì ìœ¼ë¡œ ì¹˜í™˜í•˜ì—¬ ì¶©ëŒì´ ì¼ì–´ë‚˜ëŠ” ìš”ì†Œ ë°˜í™˜ ì„±ëŠ¥ì„ ê°œì„ í–ˆë‹¤.
>        - í•˜ì§€ë§Œ Key ê°€ String, Number í´ë˜ìŠ¤ì™€ ê°™ì´ Comparableì˜ í˜•íƒœì—¬ì•¼ë§Œ ì •ë ¬ íŠ¸ë¦¬ê°€ ì§€ì›ëœë‹¤.

</br>    

# 8.3.3 getOrDefault ë©”ì„œë“œ

- `Map<K, V>` ì—ì„œ ìš”ì²­í•œ Key ê°€ Map ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° `NullPointerException` ì´ ë°œìƒí•˜ë¯€ë¡œ ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ìš”ì²­ ê²°ê³¼ì— ëŒ€í•´ `null` ì„ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ìƒê¸´ë‹¤.
- ì´ëŠ” ê¸°ë³¸ê°’ì„ ë°˜í™˜í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆê³ , ì´ì²˜ëŸ¼ ê¸°ë³¸ê°’ì„ ë°˜í™˜í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ `getOrDefault` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- `getOrDefault(Key, DefaultValue)` ì™€ ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©í•´ í•´ë‹¹ë˜ëŠ” Keyê°’ì— í•´ë‹¹ë˜ëŠ” ê°’ì´ ì—†ëŠ” ê²½ìš° DefaultValue ë¥¼ ë°˜í™˜ í•œë‹¤.
    
    ```java
    Map<String, String> favouriteMovies = Map.ofEntries(
      entry("Raphael", "Star Wars"),
      entry("Olivia", "James Bond"));
      
    System.out.println(favorieMovies.getOrDefault("Olivia", "Matrix")); 
    System.out.println(favorieMovies.getOrDefault("Thibaut", "Matrix")); 
    
    //----ì¶œë ¥----
    //James Bond ì¶œë ¥
    //Matrix ì¶œë ¥
    ```
</br>    

# 8.3.4 ê³„ì‚° íŒ¨í„´

- Java8 ì—ì„œëŠ” ìœ„ì˜ `getOrDefault` ë©”ì„œë“œ ì²˜ëŸ¼ ë‹¨ìˆœíˆ Key ì— í•´ë‹¹ë˜ëŠ” ê°’ì´ `null` ì¸ ê²½ìš°ì— ëŒ€í•œ ë°©ì§€ ë¶„ ì•„ë‹ˆë¼ ë” ë³µì¡í•œ ê²½ìš°ì˜ íŒ¨í„´ì—ë„ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ ê¸°ëŠ¥ì„ ëª‡ ê°€ì§€ ì œê³µí•œë‹¤.
- `Map<K, V>` ì—ì„œ Key ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ `ì–´ë–¤ ë™ì‘`  ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ì €ì¥í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ìˆë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ Keyë¥¼ ì´ìš©í•´ ë¹„ì‹¼ ë¹„ìš©ì˜ ë™ì‘ì„ ì‹¤í–‰í•˜ì—¬ ì–»ì€ ê²°ê³¼ë¥¼ ìºì‹± í•˜ê³ ì í•  ë•Œ, Keyê°€ ì¡´ì¬í•˜ë©´ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ê³„ì‚°í•  í•„ìš” ì—†ì´ ì €ì¥í•œë‹¤.

</br>

- ì•„ë˜ì˜ ì„¸ê°€ì§€ ì—°ì‚°ì„ ì´ìš©í•˜ë©´ ì´ëŸ¬í•œ ìƒí™©ì— ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.

    
    - `computeIfAbsent`
        - ì œê³µëœ Key ì— í•´ë‹¹ë˜ëŠ” Value ê°€ ì—†ê±°ë‚˜ `null` ì¸ ê²½ìš° Key ë¥¼ ì´ìš©í•´ì„œ ê°’ì„ ìƒˆë¡­ê²Œ ê³„ì‚°í•˜ì—¬ Map ì— ì¶”ê°€.
            
            ```java
            Map<String, String> map = new HashMap<>(Map.ofEntries(
                            entry("ì£ ë¥´ë””", "ê³µë£¡"),
                            entry("ìŠ¤ì¹´í”¼", "í† ë¼"),
                            entry("ì•™ëª¬ë“œ", "í•˜í”„ë¬¼ë²•")
                    ));
            
            map.computeIfAbsent("ì£ ë¥´ë””", (key) -> {
                System.out.println(key);
                System.out.println("----");
            
                return "ê°•í•œ ê³µë£¡";
            });
            
            // System.out.println()ì´ ë™ì‘í•˜ê³  Mapì— "ë¼ì´ì–¸-ì‚¬ì" í˜•íƒœì˜ í•­ëª© ì¶”ê°€
            map.computeIfAbsent("ë¼ì´ì–¸", (key) -> {
                System.out.println(key);
                System.out.println("----");
            
                return "ì‚¬ì";
            });
            
            System.out.println(map);
            //----ì¶œë ¥----
            // ë¼ì´ì–¸
            // ----
            // {ì•™ëª¬ë“œ=í•˜í”„ë¬¼ë²”, ì£ ë¥´ë””=ê³µë£¡, ë¼ì´ì–¸=ì‚¬ì, ìŠ¤ì¹´í”¼=í† ë¼}
            ```

      </br>
    
    - `computeIfPresent`
        - ì œê³µëœ Key ê°€ ì¡´ì¬í•˜ë©´ ìƒˆë¡œìš´ Value ë¥¼ ê³„ì‚°í•˜ê³  Map ì— ì¶”ê°€.
            
            ```java
            Map<String, String> map = new HashMap<>(Map.ofEntries(
                            entry("ì£ ë¥´ë””", "ê³µë£¡"),
                            entry("ìŠ¤ì¹´í”¼", "í† ë¼"),
                            entry("ì•™ëª¬ë“œ", "í•˜í”„ë¬¼ë²•")
                    ));
            
            // System.out.println()ì´ ë™ì‘í•˜ê³  Mapì— "ì¡°ë¥´ë””-ê°•í•œê³µë£¡" í˜•íƒœì˜ í•­ëª© ì¶”ê°€
            map.computeIfPresent("ì£ ë¥´ë””", (key) -> {
                System.out.println(key);
                System.out.println("----");
            
                return "ê°•í•œ ê³µë£¡";
            });
            
            map.computeIfPresent("ì •ì±„ìœ¤", (key) -> {
                System.out.println(key);
                System.out.println("----");
            
                return "ì²œì¬";
            });
            
            System.out.println(map);
            //----ì¶œë ¥----
            // ì£ ë¥´ë””
            // ----
            // {ì•™ëª¬ë“œ=í•˜í”„ë¬¼ë²”, ì£ ë¥´ë””=ê°•í•œ ê³µë£¡, ìŠ¤ì¹´í”¼=í† ë¼}
            ```

    </br>
    
    - `compute`
        - ì œê³µëœ Key ë¡œ ê³„ì‚°í•˜ê³  Map ì— ì¶”ê°€.
            
            ```java
            Map<String, String> map = new HashMap<>(Map.ofEntries(
                            entry("ì£ ë¥´ë””", "ê³µë£¡"),
                            entry("ìŠ¤ì¹´í”¼", "í† ë¼"),
                            entry("ì•™ëª¬ë“œ", "í•˜í”„ë¬¼ë²•")
                    ));
            
            map.compute("ì£ ë¥´ë””", (key, value) -> {
                System.out.println(key);
                System.out.println(value);
                System.out.println("----");
            
                return "ë°”ë³´";
            });
            
            System.out.println(map);
            //----ì¶œë ¥----
            // ì£ ë¥´ë””
            // ----
            // {ì•™ëª¬ë“œ=í•˜í”„ë¬¼ë²”, ì£ ë¥´ë””=ë°”ë³´, ìŠ¤ì¹´í”¼=í† ë¼}
            ```

</br>

# 8.3.5 ì‚­ì œ íŒ¨í„´

- Java8 ì—ì„œëŠ” `Map<K, V>` ì˜ ***`Key ì™€ Value ê°€ ì¼ì¹˜í•´ì•¼ë§Œ`*** í•­ëª©ì„ ì œê±°í•˜ëŠ” `remove` ë©”ì„œë“œë¥¼ ì œê³µí•˜ê³  ìˆë‹¤.
    
    ```java
    Map<String, String> map = new HashMap<>(Map.ofEntries(
                    entry("ì¥ì„±ì—½", "ì‚¬ê³¼"),
                    entry("ë§ì™•", "íŒŒì¸ì• í”Œ"),
                    entry("ê¹€ê³„ë€", "ë°”ë‚˜ë‚˜")
            ));
    
    System.out.println(map);
    
    like.remove("ê¹€ê³„ë€", "ë‹¤ë¥¸ê³¼ì¼");
    System.out.println(map);
    
    like.remove("ê¹€ê³„ë€", "ë°”ë‚˜ë‚˜");
    System.out.println(map);
    
    //----ì¶œë ¥----
    //{ê°•í˜¸ë™=ì‚¬ê³¼, ì´ìˆ˜ê·¼=íŒŒì¸ì• í”Œ, ê¹€ê³„ë€=ë°”ë‚˜ë‚˜}
    //{ê°•í˜¸ë™=ì‚¬ê³¼, ì´ìˆ˜ê·¼=íŒŒì¸ì• í”Œ, ê¹€ê³„ë€=ë°”ë‚˜ë‚˜}
    //{ê°•í˜¸ë™=ì‚¬ê³¼, ì´ìˆ˜ê·¼=íŒŒì¸ì• í”Œ}
    ```

</br>

# 8.3.6 êµì²´ íŒ¨í„´

- Java8 ë¶€í„° `Map<K, V>` ì—ì„œ í•­ëª©ì„ ë³€ê²½í•˜ëŠ” ë‘ ê°œì˜ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.
    - `replaceAll`
        - BiFunction ì„ ì ìš©í•œ ê²°ê³¼ë¡œ ê° í•­ëª©ì˜ ê°’ì„ êµì²´í•œë‹¤.

    </br>

    - `replace`
        - Key ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì— Value ë¥¼ ë³€ê²½í•œë‹¤.
     
    </br>
    
    ```java
    Map<String, String> map = new HashMap<>(Map.ofEntries(
                    entry("ì¥ì„±ì—½", "ì‚¬ê³¼"),
                    entry("ë§ì™•", "íŒŒì¸ì• í”Œ"),
                    entry("ê¹€ê³„ë€", "ë°”ë‚˜ë‚˜")
            ));
    
    // ì¥ì„±ì—½ì´ë¼ëŠ” key ê°’ë§Œ ê°’ì„ ë³€ê²½
    map.replace("ì¥ì„±ì—½", "í‚¤ìœ„");
    System.out.println(map);
    
    // ì¥ì„±ì—½->key, ì°¸ì™¸ -> value ê°€ ì¼ì¹˜í•˜ë©´ value ë¥¼ ë©œë¡ ìœ¼ë¡œ ë³€ê²½í•˜ëŠ”ë°
    // í˜„ì¬ ê°’ì€ í‚¤ìœ„ ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ì¥ì„±ì—½ì€ í‚¤ìœ„ë¥¼ ê°–ëŠ”ë‹¤.
    map.replace("ì¥ì„±ì—½", "ì°¸ì™¸", "ë©œë¡ ");
    System.out.println(map);
    
    // Map<K, V> ì˜ ëª¨ë“  í•­ëª©ì— ëŒ€í•´ì„œ Value ê°’ ë³€ê²½
    map.replaceAll((name, fruit) -> "ìƒíƒœ ì¢‹ì€ " + fruit);
    System.out.println(map);
    
    //----ì¶œë ¥----
    //{ê¹€ê³„ë€=ë°”ë‚˜ë‚˜, ì¥ì„±ì—½=í‚¤ìœ„, ë§ì™•=íŒŒì¸ì• í”Œ}
    //{ê¹€ê³„ë€=ë°”ë‚˜ë‚˜, ì¥ì„±ì—½=ë©œë¡ , ë§ì™•=íŒŒì¸ì• í”Œ}
    //{ê¹€ê³„ë€=ìƒíƒœ ì¢‹ì€ ë°”ë‚˜ë‚˜, ì¥ì„±ì—½=ìƒíƒœ ì¢‹ì€ ë©œë¡ , ë§ì™•=ìƒíƒœ ì¢‹ì€ íŒŒì¸ì• í”Œ}
    ```
    
</br>

# 8.3.7 í•©ì¹¨

- ì•ì„œ ë³¸ êµì²´ íŒ¨í„´ì—ì„œëŠ” í•œ ê°œì˜ `Map<K, V>` ì— ëŒ€í•´ì„œë§Œ ì ìš© ë˜ì—ˆì§€ë§Œ, ë‘ ê°œì˜ `Map<K1, V1>` , `Map<K2, V2>` ë¥¼ ì´ìš©í•œ ì‘ì—…ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë©”ì„œë“œë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.
    
    
    - `putAll`
        - ì¤‘ë³µëœ Key ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° `putAll()` ì„ ì´ìš©í•´ ë‹¨ìˆœí•˜ê²Œ í•©ì¹  ìˆ˜ ìˆë‹¤.
            
            ```java
            Map<String, String> map1 = new HashMap<>(Map.ofEntries(
                            entry("ì¥ì„±ì—½", "ì‚¬ê³¼"),
                            entry("ë§ì™•", "íŒŒì¸ì• í”Œ"),
                            entry("ê¹€ê³„ë€", "ë°”ë‚˜ë‚˜")
                    ));
            
            Map<String, String> map2 = new HashMap<>(Map.ofEntries(
                            entry("ì§€í”¼í‹°", "ë°°"),
                            entry("ë±ìŠ¤", "ìˆ˜ë°•"),
                            entry("ì •ì±„ìœ¤", "ë”¸ê¸°")
                    ));
            
            Map<String, String> map1Puls2 = new HashMap<>(map1);
            map1Plus2.putAll(map2);
            System.out.println(map1Plus2);
            
            //----ì¶œë ¥----
            //{ì¥ì„±ì—½=ì‚¬ê³¼, ë§ì™•=íŒŒì¸ì• í”Œ, ê¹€ê³„ë€=ë°”ë‚˜ë‚˜, ì§€í”¼í‹°=ë°°, ë±ìŠ¤=ìˆ˜ë°•, ì •ì±„ìœ¤=ë”¸ê¸°}
            ```

    </br>        

    - `merge`
        - ì¤‘ë³µëœ Keyê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° ì¤‘ë³µëœ Key ì— ëŒ€í•´ì„œ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ í•©ì¹ ì§€ ê²°ì •í•  ìˆ˜ ìˆëŠ” `BiFunction` ì„ ì¸ìˆ˜ë¡œ ë°›ëŠ”ë‹¤.
            
            ```java
            Map<String, String> map1 = new HashMap<>(Map.ofEntries(
                            entry("ì¥ì„±ì—½", "ì‚¬ê³¼"),
                            entry("ë§ì™•", "íŒŒì¸ì• í”Œ"),
                            entry("ê¹€ê³„ë€", "ë°”ë‚˜ë‚˜")
                    ));
            
            Map<String, String> map2 = new HashMap<>(Map.ofEntries(
                            entry("ê¹€ê³„ë€", "ë§ê³ ìŠ¤í‹´"),
                            entry("ë±ìŠ¤", "ìˆ˜ë°•"),
                            entry("ì •ì±„ìœ¤", "ë”¸ê¸°")
                    ));
            
            Map<String, String> map1Puls2 = new HashMap<>(map1);
            map2.forEach((k, v) ->
            	map1Plus2.merge(k, v, (fruit1, fruit2) -> fruit1 + "&" + fruit2));
            System.out.println(map1Plus2);
            
            //----ì¶œë ¥----
            //{ê¹€ê³„ë€=ë°”ë‚˜ë‚˜&ë§ê³ ìŠ¤í‹´, ì¥ì„±ì—½=ì‚¬ê³¼, ë§ì™•=íŒŒì¸ì• í”Œ, ë±ìŠ¤=ìˆ˜ë°•, ì •ì±„ìœ¤=ë”¸ê¸°}
            ```
            
        - `merge` ëŠ” ì§€ì •ëœ Key ì™€ ì—°ê´€ëœ ê°’ì´ ì—†ê±°ë‚˜ `null` ì¸ ê²½ìš° Keyë¥¼ `null` ì´ ì•„ë‹Œ ê²½ìš°ì˜ ê°’ì„ ì‚¬ìš©í•˜ê±°ë‚˜, ì£¼ì–´ì§„ BiFunction ì„ ì´ìš©í•´ ê²°ê³¼ë¡œ ëŒ€ì²´ í˜¹ì€ ì œê±°í•  ìˆ˜ ìˆë‹¤.
