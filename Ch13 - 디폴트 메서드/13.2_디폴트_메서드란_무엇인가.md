# 13.2 디폴트 메서드란 무엇인가?

자바 8에서는 호환성을 유지하면서 API를 바꿀 수 있도록 디폴트 메서드라는 새로운 기능을 제공한다. 

인터페이스는 자신을 구현하는 클래스에서 메서드를 구현하지 않을 수 있는 새로운 메서드 시그니처를 제공한다. 

인터페이스를 구현하는 클래스에서 구현하지 않은 메서드는 인터페이스 자체에서 기본으로 제공한다. 그래서 이를 디폴트 메서드라고 부른다.

---

디폴트 메서드는 `default` 라는 키워드로 시작하며 메서드 바디를 포함한다. 

예를 들어 컬렉션 라이브러리에 Sized라는 인터페이스를 정의했다고 하자. 다음처럼 Sized 인터페이스는 추상 메서드 size와 디폴트 메서드 isEmpty를 포함한다.

```java
public interface Sized {
    int size();
    default boolean isEmpty() { // 디폴트 메서드
       return size() == 0;
    }
}
```

이제 Sized 인터페이스를 구현하는 모든 클래스는 isEmpty의 구현도 상속 받는다. 

즉, 인터페이스에 디폴트 메서드를 추가하면 소스 호환성이 유지된다.

---

자바 8 API에서 디폴트 메서드가 상당히 많이 활용되었다.

- Collection 인터페이스의 stream 메서드
- List 인터페이스의 sort 메서드
- Predicate, Function, Comparator 등 많은 함수형 인터페이스의 Predicate.and, Function.andThen 등 다양한 디폴트 메서드
    
    → 함수형 인터페이스는 오직 하나의 추상 메서드를 포함한다. 디폴트 메서드는 추상 메서드에 해당하지 않는다는 점을 기억하자.

<br>

> ### ✅ 추상 클래스와 자바 8의 인터페이스
>
> 추상 클래스와 인터페이스는 둘 다 추상 메서드와 바디를 포함하는 메서드를 정의할 수 있다.
>
> 반면 차이도 존재한다.
>
> 1. 클래스는 하나의 추상 클래스만 상속받을 수 있지만, 인터페이스를 여러 개 구현할 수 있다.
> 
> 2. 추상 클래스는 인스턴스 변수(필드)로 공통 상태를 가질 수 있다. 하지만 인터페이스는 인스턴스 변수를 가질 수 없다.

<br>

### 이해를 돕기 위한 추가 설명!

디폴트 메서드는 인터페이스에 선언된 메서드인데, 기본적으로 구현 내용이 있는 메서드를 말한다. 인터페이스를 구현하는 클래스가 디폴트 메서드를 오버라이드(재정의) 하지 않아도 되는 특징이 있다.

예를 들어, 인터페이스에 '물건을 팔다'라는 메서드가 있다고 가정해보자. 그런데 나중에 '물건을 팔다'라는 메서드에 '세금을 계산하다'라는 기능을 추가하고 싶다면, 기존에 이 인터페이스를 구현한 모든 클래스들도 '세금을 계산하다'라는 기능을 추가해야 했다.

하지만 디폴트 메서드가 도입되면서, 이런 문제를 해결할 수 있게 되었다. '세금을 계산하다'라는 기능을 인터페이스 내부의 디폴트 메서드로 선언하면, 이 인터페이스를 구현한 클래스들은 별도의 수정 없이도 '세금을 계산하다'라는 기능을 사용할 수 있게 된 것이다.

즉, 디폴트 메서드는 인터페이스를 구현하는 클래스들에게 메서드의 구현을 강제하지 않으면서도, 새로운 기능을 추가할 수 있게 하는 역할을 한다. 따라서 기존 코드의 호환성을 유지하면서 API를 업데이트하거나 확장할 수 있게 되는 것이다.
